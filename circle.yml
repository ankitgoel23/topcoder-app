machine:
  node:
    version: 8.4.0
  environment:
    CXX: g++-4.8

dependencies:
  pre:
    - sudo add-apt-repository ppa:ubuntu-toolchain-r/test  -y
    - sudo apt-get update -y
    - sudo apt-get install g++-4.8  -y
  override:
    - node --version
    - npm --version
    - nvm --version

    
compile:
  override:
    - npm install
    - npm install coffee coffee-script jade envify
    - npm install transform-loader coffee-loader jade-loader json-loader file-loader style-loader css-loader cjsx-loader sass-loader@3.2.2
    - npm install babel-loader@6.3.2 babel-plugin-lodash babel-preset-es2015 babel-preset-react babel-preset-stage-2
    - npm install bourbon
    - npm install ngreact
    - npm install babel-core 
    - npm install node-sass
    - ls node_modules/*
    - npm run lint 
    - npm test 
    - npm run build

deployment:
  development:
    branch: dev
    owner: appirio-tech
    commands:
      - ./deploy.sh DEV
  qa:
    branch: qa-integration
    owner: appirio-tech
    commands:
      - ./deploy.sh QA
  production:
    branch: master
    owner: appirio-tech
    commands:
      - ./deploy.sh PROD
